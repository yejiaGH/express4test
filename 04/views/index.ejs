<!DOCTYPE html>
<html>
  <head>
    <title>Index</title>
    <link rel='stylesheet' href='//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css' />
    <script src='//cdn.bootcss.com/jquery/2.1.4/jquery.min.js'></script>
    <script src='//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js'></script>
  </head>
  <body class="container">
  	<ul class="nav nav-pills">
  		
  		<li role="presentation">
  			<a href="javascript:;" data-toggle="modal" data-target="#myModal">添加</a>
  		</li>
  	</ul>
  	<form action="/add" method="post">
	  	<div class="modal fade" id="myModal" tabindex="-1" role="dialog">
		  <div class="modal-dialog" role="document">
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		        <h4 class="modal-title">Modal title</h4>
		      </div>
		      <div class="modal-body">
		       
			  	    <!-- <label for="title"><input type="text" name="title" />标题</label>
			  		<input type="submit" value="添加" /> -->

			  	<div class="form-group">
			  		<label for="exampleInputEmail1">标题</label>
					<input type="text" name="title"  class="form-control title" id="exampleInputEmail1" placeholder="title" />
			  	</div>
			  </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		        <input type="submit" class="btn btn-default" value="添加" />
		      </div>
		    </div><!-- /.modal-content -->
		  </div><!-- /.modal-dialog -->
		</div><!-- /.modal -->
	</form>
  	<form action="/update" method="post">
	  	<div class="modal fade" id="myModal2" tabindex="-1" role="dialog">
		  <div class="modal-dialog" role="document">
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		        <h4 class="modal-title">Modal title</h4>
		      </div>
		      <div class="modal-body">
		       
			  	    <!-- <label for="title"><input type="text" name="title" />标题</label>
			  		<input type="submit" value="添加" /> -->

			  	<div class="form-group">
			  		<label for="exampleInputEmail1">标题</label>
			  		<input type="hidden" id="updateIndex" name="index" />
					<input type="text" name="title"  class="form-control title" id="updateTitle" placeholder="title" />
			  	</div>
			  </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		        <input type="submit" class="btn btn-default" value="更改" />
		      </div>
		    </div><!-- /.modal-content -->
		  </div><!-- /.modal-dialog -->
		</div><!-- /.modal -->
	</form>
  	<ul class="list-group">
    <% list.forEach(function(article, index) { %>
		<li class="list-group-item"><%= article.title %> <a href="/del?index=<%=index%>">删除</a>
			<a href="#" onclick="edit(<%=index%>)" data-toggle="modal" data-target="#myModal2">更改</a>
		</li>
   	<% }) %>
   	</ul>
   	<script>
   		function edit(index) {
   			// alert(index);
   			$.get('/get/' + index, function(result) {
   				console.log(JSON.stringify(result));3
   				// $('#myModal2 input')[0].value = result.title;
   				$('#updateIndex')[0].value = index;
   				$('#updateTitle')[0].value = result.title;
   			})
   		}
	</script>
  </body>
</html>
